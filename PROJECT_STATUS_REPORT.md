# ุชูุฑูุฑ ุญุงูุฉ ุงููุดุฑูุน - ููุตุฉ ุชุฎุทูุท ุงููุญุชูู

## ๐ ููุฎุต ุชูููุฐู

ุชู ุฅุฌุฑุงุก ุชุญููู ุดุงูู ูููุดุฑูุน ูุฅุตูุงุญ ุงูุนุฏูุฏ ูู ุงููุดุงูู ุงูุญุฑุฌุฉ. **ุชู ุฅุตูุงุญ ุฎุทุฃ Kanban Drag & Drop ุจูุฌุงุญ.**

---

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database)
| ุงูุฌุฏูู | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|--------|--------|---------|
| platforms | โ ููุชูู | 7 ููุตุงุช |
| clients | โ ููุชูู | 5 ุนููุงุก |
| team_members | โ ููุชูู | 4 ุฃุนุถุงุก |
| plans | โ ููุชูู | 5 ุฎุทุท |
| posts | โ ููุชูู | 15 ุจูุณุช |
| post_platforms | โ ููุชูู | 19 ุฑุจุท |
| post_variants | โ ููุชูู | ุฌุฏูู ูุงุฑุบ |
| assets | โ ููุชูู | ุฌุฏูู ูุงุฑุบ |
| comments | โ ููุชูู | ุฌุฏูู ูุงุฑุบ |
| approvals | โ ููุชูู | ุฌุฏูู ูุงุฑุบ |
| client_platforms | โ ููุชูู | ุฑุจุท ุงูุนููุงุก ุจุงูููุตุงุช |

### 2. ุฃุนูุฏุฉ ุฌุฏูู posts
- โ id, plan_id, client_id, publish_date, title
- โ main_goal, status, assigned_writer, assigned_designer
- โ created_by, locked, position, created_at, updated_at
- โ description, post_type

### 3. RLS (Row Level Security)
- โ๏ธ ูุนุทู ุญุงููุงู ููุชุทููุฑ
- ูุฌุจ ุชูุนููู ูุจู ุงูุฅูุชุงุฌ

### 4. ุงูุตูุญุงุช ูุงูุนุฑูุถ
| ุงูุตูุญุฉ | URL | ุงูุญุงูุฉ |
|--------|-----|--------|
| ุงูุชูููู | /calendar | โ ูุนูู |
| ุงูุดุจูุฉ | /grid | โ ูุนูู |
| ูุงูุจุงู | /kanban | โ ูุนูู (ุชู ุฅุตูุงุญู) |
| ุงููุงุฆูุฉ | /list | โ ูุนูู |
| ุงูุนููุงุก | /clients | โ ูุนูู |
| ุงููุฑูู | /team | โ ูุนูู |
| ุงูุฅุนุฏุงุฏุงุช | /settings | โ ูุนูู |
| ุงููุดุงุฑูุฉ ุงูุนุงูุฉ | /share/[clientId]/[year]/[month] | โ ูุนูู |

### 5. API Routes (ุชู ุฅูุดุงุคูุง)
- โ `PATCH /api/posts/[id]/status` - ุชุญุฏูุซ ุญุงูุฉ ุงูุจูุณุช
- โ `PATCH /api/posts/[id]/date` - ุชุญุฏูุซ ุชุงุฑูุฎ ุงูุจูุณุช

---

## ๐ง ุงูุฅุตูุงุญุงุช ุงูุชู ุชูุช

### 1. ุฎุทุฃ "Invalid Server Actions request" ูู Kanban
**ุงููุดููุฉ:** Server Actions ูุงูุช ุชูุดู ุนูุฏ ุงูุณุญุจ ูุงูุฅููุงุช
**ุงูุญู:** ุชุญููู ูู Server Actions ุฅูู API Routes

### 2. ูุดููุฉ ุงูุชููู ุจูู ุงูุนุฑูุถ
**ุงููุดููุฉ:** ุงูุนุฑูุถ ูุงูุช ุชุณุชุฎุฏู query params (?view=grid)
**ุงูุญู:** ุชุญููู ูุตูุญุงุช ูููุตูุฉ (/calendar, /grid, /kanban, /list)

### 3. ุฃุฎุทุงุก TypeScript
**ุงููุดููุฉ:** ุฃุฎุทุงุก ูู types ููู parameters
**ุงูุญู:** ุฅุถุงูุฉ types ุตุฑูุญุฉ (Post, Platform)

### 4. ุนุฑุถ ุงูุดุจูุฉ
**ุงููุดููุฉ:** 4 ุฃุนูุฏุฉ ุจุฏูุงู ูู 3
**ุงูุญู:** ุชุญุฏูุฏ `lg:grid-cols-3` ุจุฏูู `xl:grid-cols-4`

### 5. ุชุตููู ููุน ุงููุญุชูู
**ุงููุดููุฉ:** ูุง ูุธูุฑ ููุน ุงููุญุชูู ูู ุงููุฑูุช
**ุงูุญู:** ุฅุถุงูุฉ Badge ูููุน ุงููุญุชูู (ุตูุฑุฉ/ููุฏูู/ุฑููุฒ/ุณุชูุฑู/ูุงุฑูุณูู)

---

## โ๏ธ ูุง ูุญุชุงุฌ ุฅููุงู

### 1. Workflow Engine (ุงูุชูุงู ุงูุญุงูุงุช)
**ุงูุญุงูุฉ:** ุบูุฑ ููุชูู
**ุงููุทููุจ:**
- ููุน ุงูููุฒ ุงูุนุดูุงุฆู ุจูู ุงูุญุงูุงุช
- ุชุณูุณู: Idea โ Draft โ Design โ Internal Review โ Client Review โ Approved โ Scheduled โ Posted
- Client Review ูุง ูุตู ููุง ุฅูุง manager
- Approved ูุง ุชุญุฏุซ ุฅูุง ุฅุฐุง approvals.status='approved'

### 2. Client Approval ู Locking
**ุงูุญุงูุฉ:** ุฌุฒุฆู
**ุงููุทููุจ:**
- ุนูุฏ Approved: locked=true
- ุนูุฏ ุฑุฌูุน ุงูุญุงูุฉ (ุฑูุถ): locked=false
- ุงูุนููู ูุง ูุณุชุทูุน ุชุนุฏูู posts ุฃู variants
- ุงูุนููู ูุณุชุทูุน ููุท: comments(scope=client) + approvals

### 3. RLS Policies
**ุงูุญุงูุฉ:** ูุนุทู
**ุงููุทููุจ:**
- admin: Full access
- manager: Full access ุถูู ุงูุนููุงุก ุงููุณูุฏ ููู
- writer/designer: ูุฑุงุกุฉ + ุชุนุฏูู posts ุงููุณูุฏุฉ ููู ุฅุฐุง locked=false
- client: ูุฑุงุกุฉ ููุท + ุชุนููู + approve/reject

### 4. Storage ููููุฏูุง
**ุงูุญุงูุฉ:** ุบูุฑ ููุชูู
**ุงููุทููุจ:**
- ุฅูุดุงุก bucket: "post-assets"
- ูุณุงุฑ: /client/{clientId}/plan/{year}-{month}/post/{postId}/
- ุฑุจุท ุงููููุงุช ุจุฌุฏูู assets

### 5. Comments ูุน user_id
**ุงูุญุงูุฉ:** ุฌุฒุฆู
**ุงููุทููุจ:**
- ุฑุจุท ุงูุชุนูููุงุช ุจุงููุณุชุฎุฏู ุงูุญุงูู
- ุงูุชุญูู ูู scope (internal/client)

### 6. Auto-create Plan
**ุงูุญุงูุฉ:** ุบูุฑ ููุชูู
**ุงููุทููุจ:**
- ุฅุฐุง plan ุบูุฑ ููุฌูุฏ ููุดูุฑ: ุฅูุดุงุคู ุชููุงุฆูุงู

---

## ๐ ุงููููุงุช ุงูุฑุฆูุณูุฉ

### Components
- `components/dashboard-content.tsx` - ุงููููู ุงูุฑุฆูุณู ูููุญุฉ ุงูุชุญูู
- `components/kanban-view.tsx` - ุนุฑุถ ูุงูุจุงู
- `components/grid-view.tsx` - ุนุฑุถ ุงูุดุจูุฉ
- `components/calendar-view.tsx` - ุนุฑุถ ุงูุชูููู
- `components/post-card.tsx` - ูุฑุช ุงูุจูุณุช
- `components/public-grid-view.tsx` - ุนุฑุถ ุงูุดุจูุฉ ุงูุนุงูุฉ

### API Routes
- `app/api/posts/[id]/status/route.ts` - ุชุญุฏูุซ ุงูุญุงูุฉ
- `app/api/posts/[id]/date/route.ts` - ุชุญุฏูุซ ุงูุชุงุฑูุฎ

### Server Actions
- `lib/actions.ts` - ุฌููุน ุงูุนูููุงุช ุนูู ุงูุจูุณุชุงุช

### Data Fetching
- `lib/data.ts` - ุฌูุจ ุงูุจูุงูุงุช ูู Supabase

---

## ๐ ุจูุงูุงุช ุงูุฏุฎูู

| ุงูุจุฑูุฏ | ูููุฉ ุงููุฑูุฑ | ุงูุฏูุฑ |
|--------|-------------|-------|
| admin@example.com | Admin123! | admin |

---

## ๐ ุฎุทูุงุช ุงูุฅููุงู ุงูููุชุฑุญุฉ

1. **ุงูุฃููููุฉ ุงูุนุงููุฉ:**
   - [ ] ุชูุนูู RLS ูุน ุงูุณูุงุณุงุช ุงูููุงุณุจุฉ
   - [ ] ุฅููุงู Workflow Engine
   - [ ] ุฅุตูุงุญ Client Approval

2. **ุงูุฃููููุฉ ุงููุชูุณุทุฉ:**
   - [ ] ุฅุนุฏุงุฏ Storage bucket
   - [ ] ุฅููุงู ูุธุงู ุงูุชุนูููุงุช
   - [ ] Auto-create Plan

3. **ุงูุฃููููุฉ ุงูููุฎูุถุฉ:**
   - [ ] ุชุญุณูู ุงูุฃุฏุงุก (virtualization)
   - [ ] ุฅุถุงูุฉ ุงููุฒูุฏ ูู ุงูููุงุชุฑ
   - [ ] ุชุญุณูู UI/UX

---

## ๐ ุขุฎุฑ ุชุญุฏูุซ
2026-01-26
